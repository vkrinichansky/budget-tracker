<div mat-dialog-title class="!flex !justify-between !items-center">
  <h1>{{ title | translate }}</h1>

  <app-button [iconName]="'close'" (click)="cancelClick()"></app-button>
</div>

<div mat-dialog-content>
  <form class="flex flex-col" [formGroup]="form">
    <mat-form-field>
      <mat-label>{{ buildTranslationKey('categoryIconTitle') | translate }}</mat-label>
      <mat-select [formControlName]="formFields.CategoryIcon" (selectionChange)="setCategoryNameToInput($event.value)">
        <mat-select-trigger>
          <span class="flex justify-start items-center text-charcoal gap-x-1.5">
            <svg-icon [iconName]="selectedIcon"></svg-icon>
            <span>{{ selectedIconTitle | translate }}</span>
          </span>
        </mat-select-trigger>

        @for (option of options; track option) {
          <mat-option [value]="option">
            <app-button
              class="overflow-hidden"
              [iconName]="option.icon"
              [text]="option.textTranslationKey | translate"
              [buttonSizeX]="'full'"
              [align]="'start'"
            ></app-button>
          </mat-option>
        }
      </mat-select>

      @if (hasCategoryIconRequiredError) {
        <mat-error>{{ 'formErrors.required' | translate }}</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
      <mat-label>{{ buildTranslationKey('categoryNameTitle') | translate }}</mat-label>
      <input matInput [formControlName]="formFields.CategoryName" />

      @if (hasCategoryNameRequiredError) {
        <mat-error>{{ 'formErrors.required' | translate }}</mat-error>
      }

      @if (hasMaxLengthError) {
        <mat-error>{{ buildTranslationKey('categoryNameLengthError') | translate }}</mat-error>
      }

      @if (hasCategoryExistsError) {
        <mat-error>{{ buildTranslationKey('categoryExistsError') | translate }}</mat-error>
      }
    </mat-form-field>
  </form>
</div>

<div mat-dialog-actions>
  <app-button
    [colorScheme]="'charcoal'"
    [text]="buildTranslationKey('addCategory') | translate"
    [buttonSizeX]="'big'"
    [disabled]="!isFormValid"
    [loading]="loading$ | async"
    (click)="submitClick()"
  ></app-button>
</div>
