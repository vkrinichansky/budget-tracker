<app-base-modal [titleTranslationKey]="'dashboard.addAccountModal.title'" [footerTemplate]="footer">
  <form class="flex flex-col gap-y-2" [formGroup]="form">
    <custom-input
      [label]="'dashboard.addAccountModal.accountNameTitle' | translate"
      [formControlName]="formFields.AccountName"
      [required]="true"
      [maxLength]="20"
      [displayCharCounter]="true"
    ></custom-input>

    <custom-input
      [formControlName]="formFields.AccountValue"
      [label]="'dashboard.addAccountModal.accountValueTitle' | translate"
      [required]="true"
      [minValue]="1"
      [type]="'number'"
    ></custom-input>

    <custom-select
      [label]="'dashboard.addAccountModal.accountCurrencyTitle' | translate"
      [formControlName]="formFields.AccountCurrency"
      [options]="options"
      [idSelector]="currencyIdSelector"
      [displayValueSelector]="currencyDisplayValueSelector"
      [iconSelector]="currencyIconSelector"
      [required]="true"
    ></custom-select>

    <custom-select
      [label]="'dashboard.addAccountModal.accountIconTitle' | translate"
      [formControlName]="formFields.AccountIcon"
      [required]="true"
      [iconPickerMode]="true"
    ></custom-select>

    <color-picker
      [label]="'dashboard.addAccountModal.accountBgColorTitle' | translate"
      [formControlName]="formFields.AccountBgColor"
      [required]="true"
    ></color-picker>

    <color-picker
      [label]="'dashboard.addAccountModal.accountTextColorTitle' | translate"
      [formControlName]="formFields.AccountTextColor"
      [required]="true"
    ></color-picker>

    <app-info-card
      class="mt-4 !py-2 !h-20"
      [primaryText]="
        (form.controls[formFields.AccountValue].value || 0) + ' ' + selectedCurrencySymbol
      "
      [secondaryText]="form.controls[formFields.AccountName].value"
      [iconName]="form.controls[formFields.AccountIcon].value"
      [hexBgColor]="form.controls[formFields.AccountBgColor].value || '#F0F2F2'"
      [hexTextColor]="form.controls[formFields.AccountTextColor].value || '#2C4251'"
      [shouldUseCustomColors]="true"
    ></app-info-card>
  </form>
</app-base-modal>

<ng-template #footer>
  <app-button
    [colorScheme]="'charcoal'"
    [text]="'dashboard.addAccountModal.addAccount' | translate"
    [buttonSizeX]="'big'"
    [disabled]="!isFormValid"
    [loading]="loading$ | async"
    (click)="submitClick()"
  ></app-button>
</ng-template>
