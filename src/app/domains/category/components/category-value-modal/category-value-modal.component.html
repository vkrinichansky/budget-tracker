@let accounts = accounts$ | async;
@let category = category$ | async;
@let maxValue = maxValue$ | async;

<app-base-modal
  [titleTranslationKey]="category?.name"
  [subtitleTranslationKey]="'category.categoryValueModal.subtitle'"
  [footerTemplate]="footer"
>
  <form class="flex flex-col gap-y-2" [formGroup]="form">
    <custom-select
      [id]="formFieldsEnum.AccountToUse"
      [label]="'category.categoryValueModal.accountsTitle' | translate"
      [formControlName]="formFieldsEnum.AccountToUse"
      [options]="accounts"
      [idSelector]="idSelector"
      [displayValueSelector]="displayValueSelector"
      [iconSelector]="iconSelector"
      [isRequired]="true"
    ></custom-select>

    <custom-input
      [id]="formFieldsEnum.ValueToAdd"
      [label]="'category.categoryValueModal.valueToAddTitle' | translate"
      [isRequired]="true"
      [minValue]="1"
      [maxValue]="maxValue"
      [type]="'number'"
      [formControlName]="formFieldsEnum.ValueToAdd"
      [isDisabled]="!accoundChoosed"
      [prefix]="currencySymbolForValueField"
    ></custom-input>

    <custom-input
      [class.hidden]="!doesChoosedAccountHaveForeignCurrency"
      [id]="formFieldsEnum.ConvertedValueToAdd"
      [label]="'category.categoryValueModal.convertedValueToAddTitle' | translate"
      [isRequired]="true"
      [minValue]="1"
      [type]="'number'"
      [formControlName]="formFieldsEnum.ConvertedValueToAdd"
      [prefix]="currencySymbolForConvertedValueField"
    ></custom-input>

    <custom-textarea
      [id]="formFieldsEnum.Note"
      [label]="'category.categoryValueModal.noteTitle' | translate"
      [formControlName]="formFieldsEnum.Note"
      [maxLength]="100"
      [displayCharCounter]="true"
    ></custom-textarea>
  </form>
</app-base-modal>

<ng-template #footer>
  <app-button
    [buttonSizeX]="'px100'"
    [colorScheme]="'charcoal'"
    [text]="'category.categoryValueModal.add' | translate"
    [loading]="loading$ | async"
    [disabled]="form?.invalid"
    (click)="submitClick()"
  ></app-button>
</ng-template>
